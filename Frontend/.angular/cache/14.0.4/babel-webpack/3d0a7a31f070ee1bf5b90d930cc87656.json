{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Natan/Desktop/Project 4/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ProductModel } from 'src/app/models/product';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/admin.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"imageFile\"];\n\nfunction AddProductComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", c_r9._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r9.name);\n  }\n}\n\nfunction AddProductComponent_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Missing name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddProductComponent_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Name too short\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddProductComponent_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Missing price\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddProductComponent_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Price can't be negative\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddProductComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Price can't exceed 1000\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class AddProductComponent {\n  constructor(adminService, router) {\n    this.adminService = adminService;\n    this.router = router;\n    this.categories = [];\n    this.product = new ProductModel();\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this.categories = yield _this.adminService.getAllCategories();\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n\n  send() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this2.product.img = _this2.imageFileRef.nativeElement.files[0];\n        yield _this2.adminService.addProduct(_this2.product);\n        alert('product has been added!');\n\n        _this2.router.navigateByUrl(\"/admin\");\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n\n}\n\nAddProductComponent.ɵfac = function AddProductComponent_Factory(t) {\n  return new (t || AddProductComponent)(i0.ɵɵdirectiveInject(i1.AdminService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nAddProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddProductComponent,\n  selectors: [[\"app-add-product\"]],\n  viewQuery: function AddProductComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imageFileRef = _t.first);\n    }\n  },\n  decls: 27,\n  vars: 9,\n  consts: [[\"ngNativeValidate\", \"\", 3, \"ngSubmit\"], [\"name\", \"categoryId\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"selected\", \"\", \"disabled\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"name\", \"name\", \"required\", \"\", \"minlength\", \"3\", \"maxlength\", \"100\", 3, \"ngModel\", \"ngModelChange\"], [\"nameControl\", \"ngModel\"], [4, \"ngIf\"], [\"type\", \"number\", \"name\", \"price\", \"required\", \"\", \"min\", \"0\", \"max\", \"1000\", 3, \"ngModel\", \"ngModelChange\"], [\"priceControl\", \"ngModel\"], [\"type\", \"file\", \"accept\", \"images/*\"], [\"imageFile\", \"\"], [3, \"value\"]],\n  template: function AddProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.send();\n      });\n      i0.ɵɵelementStart(2, \"label\");\n      i0.ɵɵtext(3, \"Select Area: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"select\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_select_ngModelChange_4_listener($event) {\n        return ctx.product.categoryId = $event;\n      });\n      i0.ɵɵelementStart(5, \"option\", 2);\n      i0.ɵɵtext(6, \"Select Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, AddProductComponent_option_7_Template, 2, 2, \"option\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"label\");\n      i0.ɵɵtext(9, \"Name: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 4, 5);\n      i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.product.name = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, AddProductComponent_span_12_Template, 2, 0, \"span\", 6);\n      i0.ɵɵtemplate(13, AddProductComponent_span_13_Template, 2, 0, \"span\", 6);\n      i0.ɵɵelementStart(14, \"label\");\n      i0.ɵɵtext(15, \"Price: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"input\", 7, 8);\n      i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.product.price = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(18, AddProductComponent_span_18_Template, 2, 0, \"span\", 6);\n      i0.ɵɵtemplate(19, AddProductComponent_span_19_Template, 2, 0, \"span\", 6);\n      i0.ɵɵtemplate(20, AddProductComponent_span_20_Template, 2, 0, \"span\", 6);\n      i0.ɵɵelementStart(21, \"label\");\n      i0.ɵɵtext(22, \"Image: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"input\", 9, 10);\n      i0.ɵɵelementStart(25, \"button\");\n      i0.ɵɵtext(26, \"Add\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(11);\n\n      const _r4 = i0.ɵɵreference(17);\n\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.categoryId);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (_r1.errors == null ? null : _r1.errors[\"required\"]) && _r1.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (_r1.errors == null ? null : _r1.errors[\"minlength\"]) && _r1.touched);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.product.price);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (_r4.errors == null ? null : _r4.errors[\"required\"]) && _r4.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (_r4.errors == null ? null : _r4.errors[\"min\"]) && _r4.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (_r4.errors == null ? null : _r4.errors[\"max\"]) && _r4.touched);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinLengthValidator, i4.MaxLengthValidator, i4.MinValidator, i4.MaxValidator, i4.NgModel, i4.NgForm],\n  styles: [\"form[_ngcontent-%COMP%] {\\r\\n    width: 300px;\\r\\n    text-align: left;\\r\\n    padding: 10px;\\r\\n    border: 1px solid black;\\r\\n    margin: auto;\\r\\n}\\r\\n\\r\\nh2[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\nselect[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    box-sizing: border-box;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\nspan[_ngcontent-%COMP%] {\\r\\n    position: absolute;\\r\\n    color: red;\\r\\n    margin: 0 20px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1wcm9kdWN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxzQkFBc0I7SUFDdEIsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixjQUFjO0FBQ2xCIiwiZmlsZSI6ImFkZC1wcm9kdWN0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJmb3JtIHtcclxuICAgIHdpZHRoOiAzMDBweDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICBtYXJnaW46IGF1dG87XHJcbn1cclxuXHJcbmgyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuc2VsZWN0LCBpbnB1dCwgYnV0dG9uIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbn1cclxuXHJcbnNwYW4ge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgY29sb3I6IHJlZDtcclxuICAgIG1hcmdpbjogMCAyMHB4O1xyXG59Il19 */\"]\n});","map":{"version":3,"mappings":";AAGA,SAASA,YAAT,QAA6B,wBAA7B;;;;;;;;;;ICIYC;IAAqDA;IAAUA;;;;;IAA1BA;IAAgBA;IAAAA;;;;;;IAKzDA;IAAsEA;IAAYA;;;;;;IAClFA;IAAuEA;IAAcA;;;;;;IAIrFA;IAAwEA;IAAaA;;;;;;IACrFA;IAAmEA;IAAuBA;;;;;;IAC1FA;IAAmEA;IAAuBA;;;;ADPlG,OAAM,MAAOC,mBAAP,CAA0B;EAO9BC,YAAoBC,YAApB,EAAwDC,MAAxD,EAAsE;IAAlD;IAAoC;IAL/C,kBAA8B,EAA9B;IACA,eAAU,IAAIL,YAAJ,EAAV;EAImE;;EAEvEM,QAAQ;IAAA;;IAAA;MACX,IAAG;QACC,KAAI,CAACC,UAAL,SAAwB,KAAI,CAACH,YAAL,CAAkBI,gBAAlB,EAAxB;MACH,CAFD,CAGA,OAAMC,GAAN,EAAe;QACXC,KAAK,CAACD,GAAG,CAACE,OAAL,CAAL;MACC;IANM;EAOZ;;EAEcC,IAAI;IAAA;;IAAA;MACb,IAAG;QACC,MAAI,CAACC,OAAL,CAAaC,GAAb,GAAmB,MAAI,CAACC,YAAL,CAAkBC,aAAlB,CAAgCC,KAAhC,CAAsC,CAAtC,CAAnB;QACA,MAAM,MAAI,CAACb,YAAL,CAAkBc,UAAlB,CAA6B,MAAI,CAACL,OAAlC,CAAN;QACAH,KAAK,CAAC,yBAAD,CAAL;;QACA,MAAI,CAACL,MAAL,CAAYc,aAAZ,CAA0B,QAA1B;MACH,CALD,CAMA,OAAMV,GAAN,EAAe;QACXC,KAAK,CAACD,GAAG,CAACE,OAAL,CAAL;MACH;IATY;EAUhB;;AA5B2B;;;mBAAnBT,qBAAmBD;AAAA;;;QAAnBC;EAAmBkB;EAAAC;IAAA;;;;;;;;;;;;;;;MCZhCpB,4BAAK,CAAL,EAAK,MAAL,EAAK,CAAL;MAEUA;QAAA,OAAYqB,UAAZ;MAAkB,CAAlB;MAEFrB;MAAOA;MAAaA;MACpBA;MAA0BA;QAAA;MAAA;MACtBA;MAA0BA;MAAeA;MACzCA;MACJA;MAEAA;MAAOA;MAAMA;MACbA;MAA+BA;QAAA;MAAA;MAA/BA;MACAA;MACAA;MAEAA;MAAOA;MAAOA;MACdA;MAAkCA;QAAA;MAAA;MAAlCA;MACAA;MACAA;MACAA;MAEAA;MAAOA;MAAOA;MACdA;MAIAA;MAAQA;MAAGA;;;;;;;;MArBeA;MAAAA;MAEAA;MAAAA;MAIKA;MAAAA;MACxBA;MAAAA;MACAA;MAAAA;MAG2BA;MAAAA;MAC3BA;MAAAA;MACAA;MAAAA;MACAA;MAAAA","names":["ProductModel","i0","AddProductComponent","constructor","adminService","router","ngOnInit","categories","getAllCategories","err","alert","message","send","product","img","imageFileRef","nativeElement","files","addProduct","navigateByUrl","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\Natan\\Desktop\\Project 4\\Frontend\\src\\app\\components\\admin-area\\add-product\\add-product.component.ts","C:\\Users\\Natan\\Desktop\\Project 4\\Frontend\\src\\app\\components\\admin-area\\add-product\\add-product.component.html"],"sourcesContent":["\nimport { AdminService } from 'src/app/services/admin.service';\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { ProductModel } from 'src/app/models/product';\nimport { Router } from '@angular/router';\nimport { CategoryModel } from 'src/app/models/category';\n\n@Component({\n  selector: 'app-add-product',\n  templateUrl: './add-product.component.html',\n  styleUrls: ['./add-product.component.css']\n})\nexport class AddProductComponent implements OnInit {\n\n    public categories: CategoryModel[] = [];\n    public product = new ProductModel();\n    @ViewChild(\"imageFile\")\n    public imageFileRef: ElementRef<HTMLInputElement>;\n\n  constructor(private adminService: AdminService, private router: Router ) { }\n\n async ngOnInit(){\n    try{\n        this.categories = await this.adminService.getAllCategories();\n    }\n    catch(err: any){\n        alert(err.message);\n        }\n  }\n\n    public async send(){\n        try{\n            this.product.img = this.imageFileRef.nativeElement.files[0];\n            await this.adminService.addProduct(this.product);\n            alert('product has been added!');\n            this.router.navigateByUrl(\"/admin\");\n        }\n        catch(err: any){\n            alert(err.message);\n        }\n    }\n}\n","<div>\n\n    <form (ngSubmit)=\"send()\" ngNativeValidate>\n\n        <label>Select Area: </label>\n        <select name=\"categoryId\" [(ngModel)]=\"product.categoryId\" required>\n            <option selected disabled>Select Category</option>\n            <option *ngFor=\"let c of categories\" [value]=\"c._id\">{{c.name}}</option>\n        </select>\n\n        <label>Name: </label>\n        <input type=\"text\" name=\"name\" [(ngModel)]=\"product.name\"  #nameControl=\"ngModel\" required minlength=\"3\" maxlength=\"100\" />\n        <span *ngIf=\"nameControl.errors?.['required'] && nameControl.touched\">Missing name</span>\n        <span *ngIf=\"nameControl.errors?.['minlength'] && nameControl.touched\">Name too short</span>\n\n        <label>Price: </label>\n        <input type=\"number\" name=\"price\" [(ngModel)]=\"product.price\" #priceControl=\"ngModel\" required min=\"0\" max=\"1000\" />\n        <span *ngIf=\"priceControl.errors?.['required'] && priceControl.touched\">Missing price</span>\n        <span *ngIf=\"priceControl.errors?.['min'] && priceControl.touched\">Price can't be negative</span>\n        <span *ngIf=\"priceControl.errors?.['max'] && priceControl.touched\">Price can't exceed 1000</span>\n\n        <label>Image: </label>\n        <input type=\"file\" accept=\"images/*\" #imageFile>\n\n        \n\n        <button>Add</button>\n\n    </form>\n\n</div>\n"]},"metadata":{},"sourceType":"module"}